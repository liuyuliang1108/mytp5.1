{extend name='base/main' /}


{block name="seo"}
<title>{$title|default='老猫管理系统'}</title>
<meta name="keywords" content="{$keywords|default='页面关键字'}">
<meta name="description" content="{description|default='页面描述'}">

</head>
{/block}

{block name="content"}
<body class="childrenBody">
<div class="panel_box row">

</div>
<form class="layui-form layui-form-pane" action="" id="form-category-edit">

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>分类名称name：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.name}" placeholder="" id="" name="name">
        </div>
    </div>


    <div class="layui-form-item">
        <label class="layui-form-label">所在分类：parent_id：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.parent_id}" placeholder="" id="" name="parent_id">
        </div>
    </div>


    <div class="layui-form-item">
        <label class="layui-form-label">排序值order：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.order}" placeholder="" id="" name="order">
        </div>
    </div>

    <div class="layui-form-item" pane>
        <label class="layui-form-label">创建类型：</label>
         <div class="layui-input-block">
            <select class="select" name="type" size="1">
                <option value="0" {eq name="$data.type" value="0"}
                        selected
                        {/eq}>module</option>
                <option value="1" {eq name="$data.type" value="1"}
                        selected
                        {/eq}>controller</option>
                <option value="2" {eq name="$data.type" value="2"}
                        selected
                        {/eq}>model</option>
                <option value="3" {eq name="$data.type" value="3"}
                        selected
                        {/eq}>action not view</option>
                <option value="4" {eq name="$data.type" value="4"}
                        selected
                        {/eq}>action and view</option>
                <option value="5" {eq name="$data.type" value="5"}
                        selected
                        {/eq}>category</option>
            </select>
        </div>
    </div>


    <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">分类描述remark：</label>
        <div class="layui-input-block">
            <textarea id="textarea_cate" name="remark" placeholder="请输入内容" class="layui-textarea"></textarea>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>模块名称module：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.module}" placeholder="" id="" name="module">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>控制器名称名称controller：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.controller}" placeholder="" id="" name="controller">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>对应模型名称model：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.model}" placeholder="" id="" name="model">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>方法名称action：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.action}" placeholder="" id="" name="action">
        </div>
    </div>


    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>视图模板名称view：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.view}" placeholder="" id="" name="view">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>URL地址：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.url}" placeholder="" id="" name="url">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>显示状态status：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{:implode('|',$data.status)}" placeholder="" id="" name="status">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label"><span class="c-red">*</span>postman地址：</label>
         <div class="layui-input-block">
            <input type="text" class="layui-input" value="{$data.postman}" placeholder="" id="" name="postman">
        </div>
    </div>

    <!--隐藏提交id-->
    <input type="hidden"  value="{$data.id}"  name="id">
    <!--隐藏提交id-->
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit lay-filter="formDemo" onclick="submit_update()">提交修改</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>

{/block}

{block name="js"}
<script type="text/javascript">
    /**
     * 首页内容.js
     * */
    layui.config({
        base: '__LAYUI__/common/js/'//定义基目录
    }).extend({
        ajaxExtention:'ajaxExtention',
        $tool:'tool'
    }).use(['form','element','layer','carousel','jquery','ajaxExtention','$tool'],function(){
        var form = layui.form,
            layer = parent.layer === undefined ? layui.layer : parent.layer,
            element = layui.element,
            $ = layui.jquery,
            carousel = layui.carousel,
            $tool = layui.$tool;



    });
    $(function() {
        $("#textarea_cate").val("{$data.remark}");
    });
    //Ajax请求控制器中的方法完成数据的增加
    function submit_update() {

                        var formData = $("#form-category-edit").serialize();
                        $.ajax({
                            url: '__URL__/category/addSave',
                            data: formData,
                            type: 'post',
                            success: function (data) {

                                var data = JSON.parse(data);


                                if (data.flag == -1) {
                                    layer.msg('修改失败!', {icon: 2, time: 1000});
                                    return;
                                } else {
                                    layer.msg('修改成功!', {icon: 1, time: 1000});
                                    window.location.reload();
                                }
                            }
                        });

            }



</script>
{/block}
</body>
</html>